{"version":3,"file":"thankyou-page.js","sources":["../../../node_modules/sovendus-integration-scripts/dist/scripts/vanilla/index.mjs","../ts/thankyou-page.ts"],"sourcesContent":["var __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\nconst integrationScriptVersion = \"3.11.13\";\nvar CountryCodes = /* @__PURE__ */ ((CountryCodes2) => {\n  CountryCodes2[\"AT\"] = \"AT\";\n  CountryCodes2[\"BE\"] = \"BE\";\n  CountryCodes2[\"DK\"] = \"DK\";\n  CountryCodes2[\"FR\"] = \"FR\";\n  CountryCodes2[\"DE\"] = \"DE\";\n  CountryCodes2[\"IE\"] = \"IE\";\n  CountryCodes2[\"IT\"] = \"IT\";\n  CountryCodes2[\"NL\"] = \"NL\";\n  CountryCodes2[\"NO\"] = \"NO\";\n  CountryCodes2[\"PL\"] = \"PL\";\n  CountryCodes2[\"ES\"] = \"ES\";\n  CountryCodes2[\"SE\"] = \"SE\";\n  CountryCodes2[\"CH\"] = \"CH\";\n  CountryCodes2[\"GB\"] = \"GB\";\n  return CountryCodes2;\n})(CountryCodes || {});\nconst LANGUAGES_BY_COUNTRIES = {\n  [\n    \"AT\"\n    /* AT */\n  ]: { [\n    \"DE\"\n    /* DE */\n  ]: \"Austria\" },\n  [\n    \"BE\"\n    /* BE */\n  ]: {\n    [\n      \"FR\"\n      /* FR */\n    ]: \"Belgium French\",\n    [\n      \"NL\"\n      /* NL */\n    ]: \"Belgium Dutch\"\n  },\n  [\n    \"DK\"\n    /* DK */\n  ]: { [\n    \"DA\"\n    /* DA */\n  ]: \"Denmark\" },\n  // [CountryCodes.FI]: { [LanguageCodes.FI]: \"Finland\" },\n  [\n    \"FR\"\n    /* FR */\n  ]: { [\n    \"FR\"\n    /* FR */\n  ]: \"France\" },\n  [\n    \"DE\"\n    /* DE */\n  ]: { [\n    \"DE\"\n    /* DE */\n  ]: \"Germany\" },\n  [\n    \"IE\"\n    /* IE */\n  ]: { [\n    \"EN\"\n    /* EN */\n  ]: \"Ireland\" },\n  [\n    \"IT\"\n    /* IT */\n  ]: { [\n    \"IT\"\n    /* IT */\n  ]: \"Italy\" },\n  [\n    \"NL\"\n    /* NL */\n  ]: { [\n    \"NL\"\n    /* NL */\n  ]: \"Netherlands\" },\n  [\n    \"NO\"\n    /* NO */\n  ]: { [\n    \"NB\"\n    /* NB */\n  ]: \"Norway\" },\n  [\n    \"PL\"\n    /* PL */\n  ]: { [\n    \"PL\"\n    /* PL */\n  ]: \"Poland\" },\n  // [CountryCodes.PT]: { [LanguageCodes.PT]: \"Portugal\" },\n  [\n    \"ES\"\n    /* ES */\n  ]: { [\n    \"ES\"\n    /* ES */\n  ]: \"Spain\" },\n  [\n    \"SE\"\n    /* SE */\n  ]: { [\n    \"SV\"\n    /* SV */\n  ]: \"Sweden\" },\n  [\n    \"CH\"\n    /* CH */\n  ]: {\n    [\n      \"FR\"\n      /* FR */\n    ]: \"Switzerland French\",\n    [\n      \"DE\"\n      /* DE */\n    ]: \"Switzerland German\",\n    [\n      \"IT\"\n      /* IT */\n    ]: \"Switzerland Italian\"\n  },\n  [\n    \"GB\"\n    /* GB */\n  ]: { [\n    \"EN\"\n    /* EN */\n  ]: \"United Kingdom\" }\n};\nconst defaultIframeContainerQuerySelector = { selector: \"#sovendus-container\", where: \"none\" };\nvar SettingsType = /* @__PURE__ */ ((SettingsType2) => {\n  SettingsType2[\"SIMPLE\"] = \"simple\";\n  SettingsType2[\"COUNTRY\"] = \"country\";\n  return SettingsType2;\n})(SettingsType || {});\nconst sovendusPageApis = {\n  // this only gets called when a optimize id is set\n  // you don't have to whitelist this domain if you don't want to use Sovendus Optimize\n  optimize: \"https://www.sovopt.com/\"\n};\nconst sovLoaderScriptId = \"sovloader-script\";\nfunction getPerformanceTime() {\n  var _a, _b;\n  throwErrorInNonBrowserContext({\n    methodName: \"getPerformanceTime\",\n    pageType: \"LandingPage\",\n    requiresWindow: true\n  });\n  return ((_b = (_a = window.performance) == null ? void 0 : _a.now) == null ? void 0 : _b.call(_a)) || 0;\n}\nfunction detectCountryCode() {\n  return getCountryCodeFromHtmlTag() || getCountryFromDomain() || getCountryFromPagePath();\n}\nfunction getOptimizeId(settings, country) {\n  var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l;\n  if (((_a = settings == null ? void 0 : settings.optimize) == null ? void 0 : _a.settingsType) === SettingsType.SIMPLE) {\n    if (((_c = (_b = settings == null ? void 0 : settings.optimize) == null ? void 0 : _b.simple) == null ? void 0 : _c.isEnabled) !== false && ((_e = (_d = settings == null ? void 0 : settings.optimize) == null ? void 0 : _d.simple) == null ? void 0 : _e.optimizeId)) {\n      return settings.optimize.simple.optimizeId;\n    }\n  } else {\n    if ((_g = (_f = settings.optimize) == null ? void 0 : _f.countries) == null ? void 0 : _g.ids) {\n      const uncleanedCountryCode = country;\n      const countryCode = uncleanedCountryCode === \"UK\" ? CountryCodes.GB : uncleanedCountryCode;\n      if (countryCode) {\n        const countryElement = (_i = (_h = settings.optimize.countries) == null ? void 0 : _h.ids) == null ? void 0 : _i[countryCode];\n        return (countryElement == null ? void 0 : countryElement.isEnabled) ? countryElement == null ? void 0 : countryElement.optimizeId : void 0;\n      }\n      const fallbackId = (_k = (_j = settings == null ? void 0 : settings.optimize) == null ? void 0 : _j.countries) == null ? void 0 : _k.fallBackId;\n      if (((_l = settings.optimize) == null ? void 0 : _l.countries.fallBackEnabled) && fallbackId) {\n        return fallbackId;\n      }\n    }\n  }\n  return void 0;\n}\nfunction throwErrorInNonBrowserContext({\n  methodName,\n  requiresWindow,\n  requiresDocument,\n  pageType\n}) {\n  if ((requiresDocument ? typeof document === \"undefined\" : false) || (requiresWindow ? typeof window === \"undefined\" : false)) {\n    throw new Error(\n      `Sovendus App [${pageType}] - ${methodName}: ${requiresWindow ? \"window\" : \"\"} ${requiresDocument ? \"document\" : \"\"} is not available in your context, you can override this method`\n    );\n  }\n}\nfunction loggerError(message, pageType, ...other) {\n  console.error(`Sovendus App [${pageType}] - ${message}`, ...other);\n}\nfunction loggerInfo(message, pageType, ...other) {\n  console.log(`Sovendus App [${pageType}] - ${message}`, ...other);\n}\nfunction getCountryCodeFromHtmlTag() {\n  throwErrorInNonBrowserContext({\n    methodName: \"getCountryCodeFromHtmlTag\",\n    pageType: \"LandingPage\",\n    requiresDocument: true\n  });\n  const lang = document.documentElement.lang;\n  const countryCode = lang.split(\"-\")[1];\n  return countryCode ? castToCountry(countryCode.toUpperCase()) : void 0;\n}\nfunction getCountryFromDomain() {\n  throwErrorInNonBrowserContext({\n    methodName: \"getCountryFromDomain\",\n    pageType: \"LandingPage\",\n    requiresWindow: true\n  });\n  const domainToCountry = {\n    \"de\": \"DE\",\n    \"at\": \"AT\",\n    \"ch\": \"CH\",\n    \"uk\": \"GB\",\n    \"co.uk\": \"GB\",\n    \"com\": void 0,\n    \"se\": \"SE\",\n    \"no\": \"NO\",\n    \"dk\": \"DK\",\n    \"fi\": \"FI\",\n    \"fr\": \"FR\",\n    \"be\": \"BE\",\n    \"nl\": \"NL\",\n    \"it\": \"IT\",\n    \"es\": \"ES\",\n    \"pt\": \"PT\",\n    \"pl\": \"PL\",\n    \"cz\": \"CZ\",\n    \"sk\": \"SK\",\n    \"hu\": \"HU\"\n  };\n  const domain = window.location.hostname;\n  const domainParts = domain.split(\".\");\n  const domainPart = domainParts[domainParts.length - 1];\n  return domainPart ? domainToCountry[domainPart] : void 0;\n}\nfunction getCountryFromPagePath() {\n  throwErrorInNonBrowserContext({\n    methodName: \"getCountryFromDomain\",\n    pageType: \"LandingPage\",\n    requiresWindow: true\n  });\n  const path = window.location.pathname;\n  const pathParts = path.split(\"/\");\n  const country = pathParts[1];\n  return castToCountry(country == null ? void 0 : country.toUpperCase());\n}\nfunction castToCountry(value) {\n  if (value && Object.values(CountryCodes).includes(value)) {\n    return value;\n  }\n  return void 0;\n}\nfunction makeString(value) {\n  if (value === void 0) {\n    return void 0;\n  }\n  if (typeof value === \"string\") {\n    return value;\n  }\n  return void 0;\n}\nfunction makeNumber(value) {\n  if (value === void 0) {\n    return void 0;\n  }\n  if (typeof value === \"number\") {\n    return value;\n  }\n  if (typeof value === \"string\") {\n    const number = Number(value);\n    if (!Number.isNaN(number)) {\n      return number;\n    }\n  }\n  return void 0;\n}\nfunction unmount() {\n  try {\n    const optimizeScript = document.getElementById(this.optimizeScriptId);\n    if (optimizeScript) {\n      optimizeScript.remove();\n    }\n    if (window.sovPageConfig) {\n      delete window.sovPageConfig;\n    }\n    if (window.sovPageStatus) {\n      delete window.sovPageStatus;\n    }\n    if (window.sovPageInitialized) {\n      delete window.sovPageInitialized;\n    }\n  } catch (error) {\n    loggerError(\"Error during cleanup in unmount:\", \"LandingPage\", error);\n  }\n}\nconst urlParamAndCookieKeys = [\n  // These are the keys that Sovendus uses to store the url params as cookies\n  // for simplicity we store all supported url params as cookies\n  // as without the url params the cookies would not be set anyway\n  // each url param requires separate opt in on Sovendus side, so this is safe to use\n  //\n  // key only passed on in Switzerland Voucher Network\n  \"puid\",\n  // Optional link based conversion tracking for Sovendus Voucher Network\n  \"sovCouponCode\",\n  // Key used for Sovendus Checkout Products\n  \"sovReqToken\",\n  // used to enable debug mode for the testing process.\n  \"sovDebugLevel\"\n];\nfunction sovendusPageMain(sovPageConfig, onDone) {\n  return __async(this, null, function* () {\n    const sovPageStatus = this.initializeStatus();\n    this.processConfig(sovPageConfig, sovPageStatus);\n    try {\n      if (!sovPageConfig) {\n        sovPageStatus.status.sovPageConfigFound = true;\n        onDone({ sovPageStatus, sovPageConfig });\n        loggerError(\"sovPageConfig is not defined\", \"LandingPage\");\n        return;\n      }\n      sovPageStatus.urlData = yield this.lookForUrlParamsToStore(sovPageStatus);\n      this.sovendusOptimize(sovPageConfig, sovPageStatus);\n      sovPageStatus.times.integrationLoaderDone = this.getPerformanceTime();\n    } catch (error) {\n      loggerError(\"Crash in SovendusPage.main\", \"LandingPage\", error);\n    }\n    onDone({ sovPageStatus, sovPageConfig });\n  });\n}\nfunction initializePageStatus() {\n  return {\n    integrationScriptVersion,\n    urlData: {\n      sovCouponCode: void 0,\n      sovReqToken: void 0,\n      puid: void 0,\n      sovDebugLevel: void 0\n    },\n    status: {\n      sovPageConfigFound: false,\n      loadedOptimize: false,\n      storedCookies: false,\n      countryCodePassedOnByPlugin: false\n    },\n    times: {\n      integrationLoaderStart: this.getPerformanceTime()\n    }\n  };\n}\nfunction getSovendusUrlParameters() {\n  return __async(this, null, function* () {\n    const pageViewData = {\n      sovCouponCode: void 0,\n      sovReqToken: void 0,\n      puid: void 0,\n      sovDebugLevel: void 0\n    };\n    const urlParams = yield this.getSearchParams();\n    urlParamAndCookieKeys.forEach((dataKey) => {\n      const paramValue = urlParams == null ? void 0 : urlParams.get(dataKey);\n      if (paramValue) {\n        if (dataKey === \"sovDebugLevel\") {\n          if (paramValue === \"debug\" || paramValue === \"silent\") {\n            pageViewData[dataKey] = paramValue;\n          }\n        } else {\n          pageViewData[dataKey] = paramValue;\n        }\n      }\n    });\n    return pageViewData;\n  });\n}\nfunction lookForUrlParamsToStore(sovPageStatus) {\n  return __async(this, null, function* () {\n    try {\n      const pageViewData = yield this.getSovendusUrlParameters();\n      yield Promise.all(\n        Object.entries(pageViewData).map((_0) => __async(this, [_0], function* ([cookieKey, cookieValue]) {\n          if (cookieValue) {\n            yield this.setCookie(cookieKey, cookieValue);\n            sovPageStatus.status.storedCookies = true;\n          }\n        }))\n      );\n      return pageViewData;\n    } catch (error) {\n      loggerError(\"Error while storing url params\", \"LandingPage\", error);\n    }\n    return {\n      sovCouponCode: void 0,\n      sovReqToken: void 0,\n      puid: void 0,\n      sovDebugLevel: void 0\n    };\n  });\n}\nfunction processPageConfig(sovPageConfig, sovPageStatus) {\n  this.handleCountryCode(sovPageConfig, sovPageStatus);\n}\nfunction handlePageCountryCode(sovPageConfig, sovPageStatus) {\n  if (sovPageConfig.country === \"UK\") {\n    sovPageConfig.country = CountryCodes.GB;\n  }\n  if (!sovPageConfig.country) {\n    sovPageStatus.status.countryCodePassedOnByPlugin = false;\n    sovPageConfig.country = sovPageConfig.country || this.detectCountryCode();\n  }\n}\nfunction sovendusOptimize(sovPageConfig, sovPageStatus) {\n  const optimizeId = getOptimizeId(\n    sovPageConfig.settings,\n    sovPageConfig.country\n  );\n  if (!optimizeId) {\n    return;\n  }\n  this.handleOptimizeScript(optimizeId, sovPageConfig, sovPageStatus);\n  sovPageStatus.status.loadedOptimize = true;\n}\nconst optimizeScriptId = \"sovendus-optimize-script\";\nfunction handleOptimizeScript(optimizeId, _sovPageConfig, _sovPageStatus) {\n  throwErrorInNonBrowserContext({\n    methodName: \"sovendusOptimize\",\n    pageType: \"LandingPage\",\n    requiresDocument: true\n  });\n  const script = document.createElement(\"script\");\n  script.async = true;\n  script.id = this.optimizeScriptId;\n  script.type = \"application/javascript\";\n  script.src = `${sovendusPageApis.optimize}${optimizeId}`;\n  document.head.appendChild(script);\n}\nclass SovendusPage {\n  constructor() {\n    // Standard implementation of the Sovendus page script\n    // You can extend this class and override the methods to customize the behavior\n    // You can find example overrides in any of our Sovendus plugins\n    // Also make sure to check out our docs for more information\n    __publicField(this, \"urlParamAndCookieKeys\", urlParamAndCookieKeys);\n    __publicField(this, \"main\", sovendusPageMain);\n    __publicField(this, \"initializeStatus\", initializePageStatus);\n    // allow non async as some context might not require it\n    __publicField(this, \"getSovendusUrlParameters\", getSovendusUrlParameters);\n    __publicField(this, \"lookForUrlParamsToStore\", lookForUrlParamsToStore);\n    __publicField(this, \"sovendusOptimize\", sovendusOptimize);\n    __publicField(this, \"optimizeScriptId\", optimizeScriptId);\n    __publicField(this, \"processConfig\", processPageConfig);\n    __publicField(this, \"handleCountryCode\", handlePageCountryCode);\n    __publicField(this, \"getPerformanceTime\", getPerformanceTime);\n    __publicField(this, \"detectCountryCode\", detectCountryCode);\n    __publicField(this, \"unmount\", unmount);\n  }\n  // make it async as some context might require it\n  getSearchParams() {\n    throwErrorInNonBrowserContext({\n      methodName: \"getSearchParams\",\n      pageType: \"LandingPage\",\n      requiresWindow: true\n    });\n    return new URLSearchParams(window.location.search);\n  }\n  // make it async as some context might require it\n  setCookie(cookieName, value) {\n    throwErrorInNonBrowserContext({\n      methodName: \"setCookie\",\n      pageType: \"LandingPage\",\n      requiresDocument: true,\n      requiresWindow: true\n    });\n    const path = \"/\";\n    const expireDate = /* @__PURE__ */ new Date();\n    expireDate.setTime(expireDate.getTime() + 24 * 60 * 60 * 1e3 * 30);\n    const domain = window.location.hostname;\n    const cookieString = `${cookieName}=${value};secure;samesite=strict;expires=${expireDate.toUTCString()};domain=${domain};path=${path}`;\n    document.cookie = cookieString;\n  }\n  handleOptimizeScript(optimizeId, _sovPageConfig, _sovPageStatus) {\n    throwErrorInNonBrowserContext({\n      methodName: \"sovendusOptimize\",\n      pageType: \"LandingPage\",\n      requiresDocument: true\n    });\n    const script = document.createElement(\"script\");\n    script.async = true;\n    script.id = this.optimizeScriptId;\n    script.type = \"application/javascript\";\n    script.src = `${sovendusPageApis.optimize}${optimizeId}`;\n    document.head.appendChild(script);\n  }\n}\nfunction loadSovendusPage() {\n  const OnDone = ({ sovPageStatus }) => {\n    window.sovPageStatus = sovPageStatus;\n  };\n  void new SovendusPage().main(window.sovPageConfig, OnDone);\n}\nfunction sovendusThankyouMain(sovThankyouConfig, onDone) {\n  return __async(this, null, function* () {\n    const sovThankyouStatus = this.initializeStatus();\n    try {\n      if (!sovThankyouConfig) {\n        sovThankyouStatus.status.sovThankyouConfigFound = false;\n        loggerError(\"sovThankyouConfig is not defined\", \"ThankyouPage\");\n        onDone({ sovThankyouStatus, sovThankyouConfig });\n        return;\n      }\n      sovThankyouStatus.status.sovThankyouConfigFound = true;\n      yield this.processConfig(sovThankyouConfig, sovThankyouStatus);\n      this.handleVoucherNetwork(sovThankyouConfig, sovThankyouStatus);\n      yield this.handleCheckoutProductsConversion(\n        sovThankyouConfig,\n        sovThankyouStatus\n      );\n      yield this.handleOptimizeConversion(sovThankyouConfig, sovThankyouStatus);\n      sovThankyouStatus.times.integrationLoaderDone = this.getPerformanceTime();\n      sovThankyouStatus.status.integrationLoaderDone = true;\n    } catch (error) {\n      loggerError(\"Error in SovendusThankyouPage.main\", \"ThankyouPage\", error);\n    }\n    onDone({ sovThankyouConfig, sovThankyouStatus });\n  });\n}\nfunction processConfig(sovThankyouConfig, sovThankyouStatus) {\n  return __async(this, null, function* () {\n    yield this.handleVoucherCode(sovThankyouConfig);\n    this.handleStreet(sovThankyouConfig);\n    this.handleCountryCode(sovThankyouConfig, sovThankyouStatus);\n    this.handleOrderValue(sovThankyouConfig);\n  });\n}\nfunction handleCountryCode(sovThankyouConfig, sovThankyouStatus) {\n  if (sovThankyouConfig.customerData.consumerCountry === \"UK\") {\n    sovThankyouConfig.customerData.consumerCountry = CountryCodes.GB;\n  }\n  if (!sovThankyouConfig.customerData.consumerCountry) {\n    sovThankyouStatus.status.countryCodePassedOnByPlugin = false;\n    sovThankyouConfig.customerData.consumerCountry = sovThankyouConfig.customerData.consumerCountry || this.detectCountryCode();\n  } else {\n    sovThankyouStatus.status.countryCodePassedOnByPlugin = true;\n  }\n}\nfunction handleOptimizeConversion(sovThankyouConfig, sovThankyouStatus) {\n  return __async(this, null, function* () {\n    var _a;\n    const optimizeId = getOptimizeId(\n      sovThankyouConfig.settings,\n      sovThankyouConfig.customerData.consumerCountry\n    );\n    if (!optimizeId) {\n      return;\n    }\n    const couponCode = (_a = sovThankyouConfig.orderData.usedCouponCodes) == null ? void 0 : _a[0];\n    yield this.handleOptimizeConversionScript(\n      optimizeId,\n      couponCode,\n      sovThankyouConfig,\n      sovThankyouStatus\n    );\n  });\n}\nfunction handleStreet(sovThankyouConfig) {\n  if (sovThankyouConfig.customerData.consumerStreetWithNumber) {\n    const [street, streetNumber] = this.splitStreetAndStreetNumber(\n      sovThankyouConfig.customerData.consumerStreetWithNumber\n    );\n    sovThankyouConfig.customerData.consumerStreet = street;\n    sovThankyouConfig.customerData.consumerStreetNumber = streetNumber;\n  }\n}\nfunction handleOrderValue(sovThankyouConfig) {\n  const orderValueData = sovThankyouConfig.orderData.orderValue;\n  if (!orderValueData) {\n    return;\n  }\n  if (orderValueData.netOrderValue) {\n    orderValueData.netOrderValue = makeNumber(orderValueData.netOrderValue);\n  } else {\n    orderValueData.netOrderValue = calculateNetValue(orderValueData);\n  }\n}\nfunction calculateNetValue(orderValueData) {\n  const grossOrderValue = makeNumber(orderValueData.grossOrderValue);\n  if (typeof grossOrderValue === \"undefined\") {\n    return void 0;\n  } else {\n    const shippingValue = makeNumber(orderValueData.shippingValue);\n    if (typeof shippingValue === \"undefined\") {\n      loggerError(\n        \"shippingValue is not defined in SovendusThankyouPage.calculateOrderValue\",\n        \"ThankyouPage\"\n      );\n    }\n    const taxValue = calculateTaxValue(orderValueData, grossOrderValue);\n    return Math.max(0, grossOrderValue - taxValue - (shippingValue || 0));\n  }\n}\nfunction calculateTaxValue(orderValueData, grossOrderValue) {\n  const taxValue = makeNumber(orderValueData.taxValue);\n  if (typeof taxValue === \"undefined\") {\n    const taxPercent = makeNumber(orderValueData.taxPercent);\n    if (typeof taxPercent === \"undefined\") {\n      loggerError(\n        \"Either taxPercent or taxValue has to be defined in SovendusThankyouPage.calculateOrderValue\",\n        \"ThankyouPage\"\n      );\n    } else {\n      return grossOrderValue / (1 + taxPercent / 100) * (taxPercent / 100);\n    }\n  } else {\n    return taxValue;\n  }\n  return 0;\n}\nfunction splitStreetAndStreetNumber(street) {\n  if (!street) {\n    return [\"\", \"\"];\n  }\n  const trimmedStreet = street.trim();\n  const apartmentComplexMatch = trimmedStreet.match(\n    /^(.*?),\\s*(\\d+[A-Za-z]?)\\s+(.+)$/\n  );\n  if (apartmentComplexMatch && apartmentComplexMatch[1] && apartmentComplexMatch[2] && apartmentComplexMatch[3]) {\n    const apartmentPart = apartmentComplexMatch[1].trim();\n    const streetNumber = apartmentComplexMatch[2].trim();\n    const streetName = apartmentComplexMatch[3].trim();\n    return [`${apartmentPart}, ${streetName}`, streetNumber];\n  }\n  const angleSaxonMatch = trimmedStreet.match(/^(\\d+[A-Za-z]?)\\s+(.+)$/);\n  if (angleSaxonMatch && angleSaxonMatch[1] && angleSaxonMatch[2]) {\n    const streetNumber = angleSaxonMatch[1].trim();\n    const streetName = angleSaxonMatch[2].trim();\n    if (streetName.split(/\\s+/).length >= 2) {\n      const possiblePostalCode = streetNumber.match(/^\\d{4,5}$/);\n      if (possiblePostalCode) {\n        return [trimmedStreet, \"\"];\n      }\n    }\n    return [streetName, streetNumber];\n  }\n  const europeanMatch = trimmedStreet.match(\n    /^(.*?)\\s+(\\d+(?:[\\s/-]*\\d*)(?:[A-Za-z])?(?:\\s+[A-Za-z])?)$/\n  );\n  if (europeanMatch && europeanMatch[1] && europeanMatch[2]) {\n    const streetName = europeanMatch[1].trim();\n    const streetNumber = europeanMatch[2].trim();\n    return [streetName, streetNumber];\n  }\n  return [trimmedStreet, \"\"];\n}\nfunction handleVoucherCode(sovThankyouConfig) {\n  return __async(this, null, function* () {\n    const couponCodes = new Set(\n      sovThankyouConfig.orderData.usedCouponCodes\n    );\n    const couponFromCookie = yield this.getCookie(\"sovCouponCode\");\n    if (couponFromCookie) {\n      this.clearCookie(\"sovCouponCode\");\n      sovThankyouConfig.orderData.usedCouponCodes = [couponFromCookie];\n      return;\n    }\n    if (sovThankyouConfig.orderData.usedCouponCode) {\n      couponCodes.add(sovThankyouConfig.orderData.usedCouponCode);\n    }\n    sovThankyouConfig.orderData.usedCouponCodes = Array.from(couponCodes);\n  });\n}\nfunction initializeStatus() {\n  const sovThankyouStatus = {\n    integrationScriptVersion,\n    status: {\n      sovThankyouConfigFound: false,\n      integrationLoaderStarted: false,\n      integrationParametersLoaded: false,\n      checkoutProductsPixelFired: false,\n      loadedOptimize: false,\n      voucherNetworkLinkTrackingSuccess: false,\n      integrationLoaderVnCbStarted: false,\n      integrationLoaderDone: false,\n      voucherNetworkIframeContainerIdFound: false,\n      voucherNetworkIframeContainerFound: false,\n      countryCodePassedOnByPlugin: false\n    },\n    data: {\n      orderValue: void 0,\n      orderCurrency: void 0,\n      orderId: void 0,\n      sovCouponCode: void 0,\n      sovReqToken: void 0,\n      puid: void 0,\n      sovDebugLevel: void 0\n    },\n    times: {\n      integrationLoaderStart: this.getPerformanceTime()\n    }\n  };\n  return sovThankyouStatus;\n}\nfunction handleCheckoutProductsConversion(sovThankyouConfig, sovThankyouStatus) {\n  return __async(this, null, function* () {\n    const { checkoutProducts } = sovThankyouConfig.settings;\n    if (checkoutProducts) {\n      const sovReqToken = yield this.getCookie(\"sovReqToken\");\n      if (sovReqToken) {\n        this.clearCookie(\"sovReqToken\");\n        const pixelUrl = `https://press-order-api.sovendus.com/ext/image?sovReqToken=${decodeURIComponent(sovReqToken)}`;\n        yield fetch(pixelUrl);\n        sovThankyouStatus.status.checkoutProductsPixelFired = true;\n      }\n    }\n    return false;\n  });\n}\nfunction getVoucherNetworkConfig(sovThankyouConfig) {\n  var _a, _b, _c, _d, _e, _f;\n  if (((_b = (_a = sovThankyouConfig.settings) == null ? void 0 : _a.voucherNetwork) == null ? void 0 : _b.settingType) === SettingsType.SIMPLE) {\n    return (_d = (_c = sovThankyouConfig.settings) == null ? void 0 : _c.voucherNetwork) == null ? void 0 : _d.simple;\n  }\n  if (((_f = (_e = sovThankyouConfig.settings) == null ? void 0 : _e.voucherNetwork) == null ? void 0 : _f.settingType) === SettingsType.COUNTRY) {\n    return this.getVoucherNetworkCountryBasedSettings(sovThankyouConfig);\n  }\n  return void 0;\n}\nfunction getVoucherNetworkCountryBasedSettings(sovThankyouConfig) {\n  var _a, _b, _c, _d, _e, _f, _g, _h, _i;\n  const country = sovThankyouConfig.customerData.consumerCountry;\n  if (!sovThankyouConfig.customerData.consumerCountry) {\n    return void 0;\n  }\n  const countrySettings = (_d = (_c = (_b = (_a = sovThankyouConfig.settings) == null ? void 0 : _a.voucherNetwork) == null ? void 0 : _b.countries) == null ? void 0 : _c.ids) == null ? void 0 : _d[country];\n  const languagesSettings = countrySettings == null ? void 0 : countrySettings.languages;\n  if (!languagesSettings) {\n    return void 0;\n  }\n  const languagesAvailable = Object.keys(LANGUAGES_BY_COUNTRIES[country]);\n  if ((languagesAvailable == null ? void 0 : languagesAvailable.length) === 1) {\n    const language = languagesAvailable[0];\n    const languageSettings = languagesSettings[language];\n    return __spreadProps(__spreadValues({\n      isEnabled: (languageSettings == null ? void 0 : languageSettings.isEnabled) || false,\n      trafficSourceNumber: (languageSettings == null ? void 0 : languageSettings.trafficSourceNumber) || \"\",\n      trafficMediumNumber: (languageSettings == null ? void 0 : languageSettings.trafficMediumNumber) || \"\"\n    }, languageSettings), {\n      iframeContainerQuerySelector: ((_g = (_f = (_e = sovThankyouConfig.settings) == null ? void 0 : _e.voucherNetwork) == null ? void 0 : _f.countries) == null ? void 0 : _g.iframeContainerQuerySelector) || (languageSettings == null ? void 0 : languageSettings.iframeContainerQuerySelector)\n    });\n  }\n  if ((languagesAvailable == null ? void 0 : languagesAvailable.length) > 1) {\n    const languageKey = sovThankyouConfig.customerData.consumerLanguage || this.detectLanguageCode();\n    const languageSettings = languageKey && languagesSettings[languageKey];\n    if (!languageSettings) {\n      return void 0;\n    }\n    return __spreadProps(__spreadValues({}, languageSettings), {\n      iframeContainerQuerySelector: ((_i = (_h = sovThankyouConfig.settings.voucherNetwork) == null ? void 0 : _h.countries) == null ? void 0 : _i.iframeContainerQuerySelector) || (languageSettings == null ? void 0 : languageSettings.iframeContainerQuerySelector)\n    });\n  }\n  return void 0;\n}\nfunction handleCouponCodes(orderData, trafficSourceNumber) {\n  return __async(this, null, function* () {\n    var _a;\n    const couponCodes = (_a = orderData.usedCouponCodes) == null ? void 0 : _a.slice(1);\n    if (couponCodes) {\n      yield Promise.all(\n        couponCodes.map((coupon) => __async(this, null, function* () {\n          var _a2, _b;\n          yield sendCouponCode({\n            trafficSourceNumber,\n            couponCode: coupon,\n            orderValue: ((_a2 = orderData.orderValue) == null ? void 0 : _a2.netOrderValue) ? Number((_b = orderData.orderValue) == null ? void 0 : _b.netOrderValue) : void 0,\n            orderCurrency: orderData.orderCurrency,\n            orderId: orderData.orderId,\n            sessionId: orderData.sessionId\n          });\n        }))\n      );\n    }\n  });\n}\nfunction sendCouponCode(redemptionData) {\n  return __async(this, null, function* () {\n    const endpoint = `https://integration-api.sovendus.com/coupon/code-transmitted/${encodeURIComponent(\n      btoa(JSON.stringify(redemptionData))\n    )}`;\n    yield fetch(endpoint, {\n      method: \"POST\",\n      body: JSON.stringify(redemptionData)\n    });\n  });\n}\nconst flexibleIframeScriptId = \"sovendus-iframe-script\";\nfunction cleanUp() {\n  var _a, _b, _c, _d, _e, _f;\n  (_b = (_a = window.sovApplication) == null ? void 0 : _a.instances) == null ? void 0 : _b.forEach((instance) => {\n    var _a2, _b2, _c2, _d2, _e2, _f2, _g, _h;\n    if (instance.isCollapsableOverlay) {\n      (_b2 = (_a2 = window.sovApplication) == null ? void 0 : _a2.collapsableOverlay) == null ? void 0 : _b2.closeInstance(instance, false);\n      (_d2 = (_c2 = window.sovApplication) == null ? void 0 : _c2.sovCollector) == null ? void 0 : _d2.clearProperties();\n    }\n    if (instance.isStickyBanner) {\n      (_f2 = (_e2 = window.sovApplication) == null ? void 0 : _e2.stickyBanner) == null ? void 0 : _f2.closeInstance(instance);\n      (_h = (_g = window.sovApplication) == null ? void 0 : _g.sovCollector) == null ? void 0 : _h.clearProperties();\n    }\n  });\n  if ((_c = window.sovApplication) == null ? void 0 : _c.messageListener) {\n    window.removeEventListener(\n      \"message\",\n      (_d = window.sovApplication) == null ? void 0 : _d.messageListener,\n      true\n    );\n    window.sovApplication.resizeListenerAdded = false;\n  }\n  if (window.sovThankyouConfig) {\n    delete window.sovThankyouConfig;\n  }\n  if (window.sovThankyouStatus) {\n    delete window.sovThankyouStatus;\n  }\n  if (window.sovConsumer) {\n    delete window.sovConsumer;\n  }\n  if (window.sovIframes) {\n    delete window.sovIframes;\n  }\n  if (window.sovApplication) {\n    delete window.sovApplication;\n  }\n  (_e = document.getElementById(sovLoaderScriptId)) == null ? void 0 : _e.remove();\n  (_f = document.getElementById(flexibleIframeScriptId)) == null ? void 0 : _f.remove();\n}\nclass SovendusThankyouPage {\n  constructor() {\n    // Standard implementation of the Sovendus thankyou page script\n    // You can extend this class and override the methods to customize the behavior\n    // You can find example overrides in any of our Sovendus plugins\n    // Also make sure to check out our docs for more information\n    __publicField(this, \"main\", sovendusThankyouMain);\n    __publicField(this, \"processConfig\", processConfig);\n    __publicField(this, \"handleCountryCode\", handleCountryCode);\n    __publicField(this, \"handleOptimizeConversion\", handleOptimizeConversion);\n    __publicField(this, \"handleStreet\", handleStreet);\n    __publicField(this, \"splitStreetAndStreetNumber\", splitStreetAndStreetNumber);\n    __publicField(this, \"handleVoucherCode\", handleVoucherCode);\n    __publicField(this, \"initializeStatus\", initializeStatus);\n    __publicField(this, \"handleOrderValue\", handleOrderValue);\n    __publicField(this, \"handleCheckoutProductsConversion\", handleCheckoutProductsConversion);\n    __publicField(this, \"getVoucherNetworkConfig\", getVoucherNetworkConfig);\n    __publicField(this, \"getVoucherNetworkCountryBasedSettings\", getVoucherNetworkCountryBasedSettings);\n    __publicField(this, \"getPerformanceTime\", getPerformanceTime);\n    __publicField(this, \"detectCountryCode\", detectCountryCode);\n  }\n  // Is async in case the plugin needs to wait for the script to load\n  handleOptimizeConversionScript(optimizeId, couponCode, sovThankyouConfig, sovThankyouStatus) {\n    var _a;\n    throwErrorInNonBrowserContext({\n      methodName: \"handleOptimizeConversionScript\",\n      pageType: \"ThankyouPage\",\n      requiresDocument: true\n    });\n    const script = document.createElement(\"script\");\n    script.type = \"text/javascript\";\n    script.async = true;\n    script.src = `https://www.sovopt.com/${optimizeId}/conversion/?ordervalue=${(_a = sovThankyouConfig.orderData.orderValue) == null ? void 0 : _a.netOrderValue}&ordernumber=${sovThankyouConfig.orderData.orderId}&vouchercode=${couponCode}&email=${sovThankyouConfig.customerData.consumerEmail}`;\n    document.body.appendChild(script);\n    sovThankyouStatus.status.loadedOptimize = true;\n  }\n  handleVoucherNetwork(sovThankyouConfig, sovThankyouStatus) {\n    var _a, _b;\n    throwErrorInNonBrowserContext({\n      methodName: \"handleVoucherNetwork\",\n      pageType: \"ThankyouPage\",\n      requiresDocument: true,\n      requiresWindow: true\n    });\n    const voucherNetworkConfig = this.getVoucherNetworkConfig(sovThankyouConfig);\n    if ((voucherNetworkConfig == null ? void 0 : voucherNetworkConfig.trafficSourceNumber) && (voucherNetworkConfig == null ? void 0 : voucherNetworkConfig.trafficMediumNumber) && (voucherNetworkConfig == null ? void 0 : voucherNetworkConfig.isEnabled)) {\n      const iframeContainerId = this.handleSovendusVoucherNetworkDivContainer(\n        voucherNetworkConfig,\n        sovThankyouConfig,\n        sovThankyouStatus\n      );\n      window.sovIframes = window.sovIframes || [];\n      window.sovIframes.push({\n        trafficSourceNumber: voucherNetworkConfig.trafficSourceNumber,\n        trafficMediumNumber: voucherNetworkConfig.trafficMediumNumber,\n        sessionId: sovThankyouConfig.orderData.sessionId,\n        orderId: sovThankyouConfig.orderData.orderId,\n        orderValue: (_a = sovThankyouConfig.orderData.orderValue) == null ? void 0 : _a.netOrderValue,\n        orderCurrency: sovThankyouConfig.orderData.orderCurrency,\n        // TODO Handle Coupon Codes in FlexibleIFrame\n        // Transmit first Coupon Code and handle all other Coupon Codes in handleCouponCodes()\n        usedCouponCode: (_b = sovThankyouConfig.orderData.usedCouponCodes) == null ? void 0 : _b[0],\n        iframeContainerId,\n        integrationType: sovThankyouConfig.integrationType\n      });\n      window.sovConsumer = {\n        consumerFirstName: sovThankyouConfig.customerData.consumerFirstName,\n        consumerLastName: sovThankyouConfig.customerData.consumerLastName,\n        consumerEmail: sovThankyouConfig.customerData.consumerEmail,\n        consumerStreet: sovThankyouConfig.customerData.consumerStreet,\n        consumerStreetNumber: sovThankyouConfig.customerData.consumerStreetNumber,\n        consumerZipcode: sovThankyouConfig.customerData.consumerZipcode,\n        consumerCity: sovThankyouConfig.customerData.consumerCity,\n        consumerCountry: sovThankyouConfig.customerData.consumerCountry,\n        consumerPhone: sovThankyouConfig.customerData.consumerPhone,\n        consumerDateOfBirth: sovThankyouConfig.customerData.consumerDateOfBirth,\n        consumerYearOfBirth: sovThankyouConfig.customerData.consumerYearOfBirth,\n        consumerEmailHash: sovThankyouConfig.customerData.consumerEmailHash,\n        consumerSalutation: sovThankyouConfig.customerData.consumerSalutation,\n        consumerStreetWithNumber: sovThankyouConfig.customerData.consumerStreetWithNumber,\n        consumerLanguage: sovThankyouConfig.customerData.consumerLanguage\n      };\n      const script = document.createElement(\"script\");\n      script.type = \"text/javascript\";\n      script.async = true;\n      script.id = flexibleIframeScriptId;\n      script.src = \"https://api.sovendus.com/sovabo/common/js/flexibleIframe.js\";\n      document.body.appendChild(script);\n      void handleCouponCodes(\n        sovThankyouConfig.orderData,\n        voucherNetworkConfig.trafficSourceNumber\n      );\n      sovThankyouStatus.status.integrationLoaderVnCbStarted = true;\n      sovThankyouStatus.times.integrationLoaderVnCbStart = this.getPerformanceTime();\n    }\n  }\n  handleSovendusVoucherNetworkDivContainer(voucherNetworkConfig, sovThankyouConfig, sovThankyouStatus) {\n    throwErrorInNonBrowserContext({\n      methodName: \"handleSovendusVoucherNetworkDivContainer\",\n      pageType: \"ThankyouPage\",\n      requiresDocument: true,\n      requiresWindow: true\n    });\n    const iframeContainerSettings = this.getIframeQuerySelector(\n      voucherNetworkConfig,\n      sovThankyouConfig\n    );\n    const rootElement = document.querySelector(\n      iframeContainerSettings.selector\n    );\n    if (rootElement) {\n      if (iframeContainerSettings.where === \"none\") {\n        return rootElement.id;\n      }\n      const sovendusDiv = document.createElement(\"div\");\n      sovendusDiv.id = \"sovendus-container\";\n      rootElement.insertAdjacentElement(\n        iframeContainerSettings.where,\n        sovendusDiv\n      );\n      sovThankyouStatus.status.voucherNetworkIframeContainerFound = true;\n      return sovendusDiv.id;\n    } else {\n      sovThankyouStatus.status.voucherNetworkIframeContainerFound = false;\n      loggerError(\n        `Voucher Network container query selector ${iframeContainerSettings.selector} not found`,\n        \"ThankyouPage\"\n      );\n      return \"\";\n    }\n  }\n  getIframeQuerySelector(voucherNetworkConfig, sovThankyouConfig) {\n    if (voucherNetworkConfig.iframeContainerQuerySelector) {\n      return voucherNetworkConfig.iframeContainerQuerySelector;\n    }\n    if (sovThankyouConfig.iframeContainerQuerySelector) {\n      return sovThankyouConfig.iframeContainerQuerySelector;\n    }\n    loggerError(\n      \"No iframeContainerQuerySelector found in SovendusThankYouPageConfig, trying default\",\n      \"ThankyouPage\"\n    );\n    return defaultIframeContainerQuerySelector;\n  }\n  // make it async as some platforms might need to wait for the cookies\n  getCookie(name) {\n    var _a;\n    throwErrorInNonBrowserContext({\n      methodName: \"getCookie\",\n      pageType: \"ThankyouPage\",\n      requiresDocument: true\n    });\n    const value = `; ${document.cookie}`;\n    const parts = value.split(`; ${name}=`);\n    if (parts.length === 2) {\n      return (_a = parts.pop()) == null ? void 0 : _a.split(\";\").shift();\n    }\n    return void 0;\n  }\n  clearCookie(name) {\n    throwErrorInNonBrowserContext({\n      methodName: \"clearCookie\",\n      pageType: \"ThankyouPage\",\n      requiresDocument: true,\n      requiresWindow: true\n    });\n    const path = \"/\";\n    const domain = window.location.hostname;\n    const cookieString = `${name}=;secure;samesite=strict;expires=Thu, 01 Jan 1970 00:00:00 UTC;domain=${domain};path=${path}`;\n    document.cookie = cookieString;\n  }\n  detectLanguageCode() {\n    var _a;\n    throwErrorInNonBrowserContext({\n      methodName: \"getCookie\",\n      pageType: \"ThankyouPage\",\n      requiresDocument: true\n    });\n    const htmlLang = document.documentElement.lang.split(\"-\")[0];\n    if (htmlLang) {\n      return htmlLang.toUpperCase();\n    }\n    return (_a = navigator.language.split(\"-\")[0]) == null ? void 0 : _a.toUpperCase();\n  }\n  unmount() {\n    cleanUp();\n  }\n}\nfunction loadSovendusThankyouPage() {\n  const OnDone = ({ sovThankyouStatus }) => {\n    window.sovThankyouStatus = sovThankyouStatus;\n  };\n  void new SovendusThankyouPage().main(window.sovThankyouConfig, OnDone);\n}\nexport {\n  SovendusPage,\n  SovendusThankyouPage,\n  castToCountry,\n  detectCountryCode,\n  flexibleIframeScriptId,\n  getCountryCodeFromHtmlTag,\n  getCountryFromDomain,\n  getCountryFromPagePath,\n  getOptimizeId,\n  getPerformanceTime,\n  getSovendusUrlParameters,\n  getVoucherNetworkConfig,\n  getVoucherNetworkCountryBasedSettings,\n  handleCheckoutProductsConversion,\n  handleCountryCode,\n  handleCouponCodes,\n  handleOptimizeConversion,\n  handleOptimizeScript,\n  handleOrderValue,\n  handlePageCountryCode,\n  handleStreet,\n  handleVoucherCode,\n  initializePageStatus,\n  initializeStatus,\n  integrationScriptVersion,\n  loadSovendusPage,\n  loadSovendusThankyouPage,\n  loggerError,\n  loggerInfo,\n  lookForUrlParamsToStore,\n  makeNumber,\n  makeString,\n  optimizeScriptId,\n  processConfig,\n  processPageConfig,\n  sovendusOptimize,\n  sovendusPageMain,\n  sovendusThankyouMain,\n  splitStreetAndStreetNumber,\n  throwErrorInNonBrowserContext,\n  urlParamAndCookieKeys\n};\n//# sourceMappingURL=index.mjs.map\n","import { loadSovendusThankyouPage } from \"sovendus-integration-scripts\";\n\nloadSovendusThankyouPage();\n"],"names":[],"mappings":";;AAAA,MAAI,YAAY,OAAO;AACvB,MAAI,aAAa,OAAO;AACxB,MAAI,oBAAoB,OAAO;AAC/B,MAAI,sBAAsB,OAAO;AACjC,MAAI,eAAe,OAAO,UAAU;AACpC,MAAI,eAAe,OAAO,UAAU;AACpC,MAAI,kBAAkB,CAAC,KAAK,KAAK,UAAU,OAAO,MAAM,UAAU,KAAK,KAAK,EAAE,YAAY,MAAM,cAAc,MAAM,UAAU,MAAM,MAAK,CAAE,IAAI,IAAI,GAAG,IAAI;AAC1J,MAAI,iBAAiB,CAAC,GAAG,MAAM;AAC7B,aAAS,QAAQ,MAAM,IAAI,CAAA;AACzB,UAAI,aAAa,KAAK,GAAG,IAAI;AAC3B,wBAAgB,GAAG,MAAM,EAAE,IAAI,CAAC;AACpC,QAAI;AACF,eAAS,QAAQ,oBAAoB,CAAC,GAAG;AACvC,YAAI,aAAa,KAAK,GAAG,IAAI;AAC3B,0BAAgB,GAAG,MAAM,EAAE,IAAI,CAAC;AAAA,MACxC;AACE,WAAO;AAAA,EACT;AACA,MAAI,gBAAgB,CAAC,GAAG,MAAM,WAAW,GAAG,kBAAkB,CAAC,CAAC;AAChE,MAAI,gBAAgB,CAAC,KAAK,KAAK,UAAU,gBAAgB,KAAK,OAAO,QAAQ,WAAW,MAAM,KAAK,KAAK,KAAK;AAC7G,MAAI,UAAU,CAAC,QAAQ,aAAa,cAAc;AAChD,WAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACtC,UAAI,YAAY,CAAC,UAAU;AACzB,YAAI;AACF,eAAK,UAAU,KAAK,KAAK,CAAC;AAAA,QAC3B,SAAQ,GAAG;AACV,iBAAO,CAAC;AAAA,QAChB;AAAA,MACK;AACD,UAAI,WAAW,CAAC,UAAU;AACxB,YAAI;AACF,eAAK,UAAU,MAAM,KAAK,CAAC;AAAA,QAC5B,SAAQ,GAAG;AACV,iBAAO,CAAC;AAAA,QAChB;AAAA,MACK;AACD,UAAI,OAAO,CAAC,MAAM,EAAE,OAAO,QAAQ,EAAE,KAAK,IAAI,QAAQ,QAAQ,EAAE,KAAK,EAAE,KAAK,WAAW,QAAQ;AAC/F,YAAM,YAAY,UAAU,MAAM,QAAQ,WAAW,GAAG,MAAM;AAAA,IAClE,CAAG;AAAA,EACH;AACA,QAAM,2BAA2B;AACjC,MAAI,eAAgC,kBAAC,kBAAkB;AACrD,kBAAc,IAAI,IAAI;AACtB,kBAAc,IAAI,IAAI;AACtB,kBAAc,IAAI,IAAI;AACtB,kBAAc,IAAI,IAAI;AACtB,kBAAc,IAAI,IAAI;AACtB,kBAAc,IAAI,IAAI;AACtB,kBAAc,IAAI,IAAI;AACtB,kBAAc,IAAI,IAAI;AACtB,kBAAc,IAAI,IAAI;AACtB,kBAAc,IAAI,IAAI;AACtB,kBAAc,IAAI,IAAI;AACtB,kBAAc,IAAI,IAAI;AACtB,kBAAc,IAAI,IAAI;AACtB,kBAAc,IAAI,IAAI;AACtB,WAAO;AAAA,EACT,GAAG,gBAAgB,CAAA,CAAE;AACrB,QAAM,yBAAyB;AAAA,IAC7B;AAAA,MACE;AAAA;AAAA,IAEJ,GAAK,EAAE;AAAA,MACH;AAAA;AAAA,IAEJ,GAAK,UAAW;AAAA,IACd;AAAA,MACE;AAAA;AAAA,IAEC,GAAA;AAAA,MACD;AAAA,QACE;AAAA;AAAA,MAEN,GAAO;AAAA,MACH;AAAA,QACE;AAAA;AAAA,MAEC,GAAA;AAAA,IACJ;AAAA,IACD;AAAA,MACE;AAAA;AAAA,IAEJ,GAAK,EAAE;AAAA,MACH;AAAA;AAAA,IAEJ,GAAK,UAAW;AAAA;AAAA,IAEd;AAAA,MACE;AAAA;AAAA,IAEJ,GAAK,EAAE;AAAA,MACH;AAAA;AAAA,IAEJ,GAAK,SAAU;AAAA,IACb;AAAA,MACE;AAAA;AAAA,IAEJ,GAAK,EAAE;AAAA,MACH;AAAA;AAAA,IAEJ,GAAK,UAAW;AAAA,IACd;AAAA,MACE;AAAA;AAAA,IAEJ,GAAK,EAAE;AAAA,MACH;AAAA;AAAA,IAEJ,GAAK,UAAW;AAAA,IACd;AAAA,MACE;AAAA;AAAA,IAEJ,GAAK,EAAE;AAAA,MACH;AAAA;AAAA,IAEJ,GAAK,QAAS;AAAA,IACZ;AAAA,MACE;AAAA;AAAA,IAEJ,GAAK,EAAE;AAAA,MACH;AAAA;AAAA,IAEJ,GAAK,cAAe;AAAA,IAClB;AAAA,MACE;AAAA;AAAA,IAEJ,GAAK,EAAE;AAAA,MACH;AAAA;AAAA,IAEJ,GAAK,SAAU;AAAA,IACb;AAAA,MACE;AAAA;AAAA,IAEJ,GAAK,EAAE;AAAA,MACH;AAAA;AAAA,IAEJ,GAAK,SAAU;AAAA;AAAA,IAEb;AAAA,MACE;AAAA;AAAA,IAEJ,GAAK,EAAE;AAAA,MACH;AAAA;AAAA,IAEJ,GAAK,QAAS;AAAA,IACZ;AAAA,MACE;AAAA;AAAA,IAEJ,GAAK,EAAE;AAAA,MACH;AAAA;AAAA,IAEJ,GAAK,SAAU;AAAA,IACb;AAAA,MACE;AAAA;AAAA,IAEC,GAAA;AAAA,MACD;AAAA,QACE;AAAA;AAAA,MAEN,GAAO;AAAA,MACH;AAAA,QACE;AAAA;AAAA,MAEN,GAAO;AAAA,MACH;AAAA,QACE;AAAA;AAAA,MAEC,GAAA;AAAA,IACJ;AAAA,IACD;AAAA,MACE;AAAA;AAAA,IAEJ,GAAK,EAAE;AAAA,MACH;AAAA;AAAA,IAEJ,GAAK,iBAAgB;AAAA,EACrB;AACA,QAAM,sCAAsC,EAAE,UAAU,uBAAuB,OAAO,OAAQ;AAC9F,MAAI,eAAgC,kBAAC,kBAAkB;AACrD,kBAAc,QAAQ,IAAI;AAC1B,kBAAc,SAAS,IAAI;AAC3B,WAAO;AAAA,EACT,GAAG,gBAAgB,CAAA,CAAE;AAMrB,QAAM,oBAAoB;AAC1B,WAAS,qBAAqB;AAC5B,QAAI,IAAI;AACR,kCAA8B;AAAA,MAC5B,YAAY;AAAA,MACZ,UAAU;AAAA,MACV,gBAAgB;AAAA,IACpB,CAAG;AACD,aAAS,MAAM,KAAK,OAAO,gBAAgB,OAAO,SAAS,GAAG,QAAQ,OAAO,SAAS,GAAG,KAAK,EAAE,MAAM;AAAA,EACxG;AACA,WAAS,oBAAoB;AAC3B,WAAO,0BAA2B,KAAI,qBAAsB,KAAI,uBAAwB;AAAA,EAC1F;AACA,WAAS,cAAc,UAAU,SAAS;AACxC,QAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI;AAChD,UAAM,KAAK,YAAY,OAAO,SAAS,SAAS,aAAa,OAAO,SAAS,GAAG,kBAAkB,aAAa,QAAQ;AACrH,YAAM,MAAM,KAAK,YAAY,OAAO,SAAS,SAAS,aAAa,OAAO,SAAS,GAAG,WAAW,OAAO,SAAS,GAAG,eAAe,WAAW,MAAM,KAAK,YAAY,OAAO,SAAS,SAAS,aAAa,OAAO,SAAS,GAAG,WAAW,OAAO,SAAS,GAAG,aAAa;AACvQ,eAAO,SAAS,SAAS,OAAO;AAAA,MACtC;AAAA,IACA,OAAS;AACL,WAAK,MAAM,KAAK,SAAS,aAAa,OAAO,SAAS,GAAG,cAAc,OAAO,SAAS,GAAG,KAAK;AAC7F,cAAM,uBAAuB;AAC7B,cAAM,cAAc,yBAAyB,OAAO,aAAa,KAAK;AACtE,YAAI,aAAa;AACf,gBAAM,kBAAkB,MAAM,KAAK,SAAS,SAAS,cAAc,OAAO,SAAS,GAAG,QAAQ,OAAO,SAAS,GAAG,WAAW;AAC5H,kBAAQ,kBAAkB,OAAO,SAAS,eAAe,aAAa,kBAAkB,OAAO,SAAS,eAAe,aAAa;AAAA,QAC5I;AACM,cAAM,cAAc,MAAM,KAAK,YAAY,OAAO,SAAS,SAAS,aAAa,OAAO,SAAS,GAAG,cAAc,OAAO,SAAS,GAAG;AACrI,cAAM,KAAK,SAAS,aAAa,OAAO,SAAS,GAAG,UAAU,oBAAoB,YAAY;AAC5F,iBAAO;AAAA,QACf;AAAA,MACA;AAAA,IACA;AACE,WAAO;AAAA,EACT;AACA,WAAS,8BAA8B;AAAA,IACrC;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF,GAAG;AACD,SAAK,mBAAmB,OAAO,aAAa,cAAc,WAAW,iBAAiB,OAAO,WAAW,cAAc,QAAQ;AAC5H,YAAM,IAAI;AAAA,QACR,iBAAiB,QAAQ,OAAO,UAAU,KAAK,iBAAiB,WAAW,EAAE,IAAI,mBAAmB,aAAa,EAAE;AAAA,MACpH;AAAA,IACL;AAAA,EACA;AACA,WAAS,YAAY,SAAS,aAAa,OAAO;AAChD,YAAQ,MAAM,iBAAiB,QAAQ,OAAO,OAAO,IAAI,GAAG,KAAK;AAAA,EACnE;AAIA,WAAS,4BAA4B;AACnC,kCAA8B;AAAA,MAC5B,YAAY;AAAA,MACZ,UAAU;AAAA,MACV,kBAAkB;AAAA,IACtB,CAAG;AACD,UAAM,OAAO,SAAS,gBAAgB;AACtC,UAAM,cAAc,KAAK,MAAM,GAAG,EAAE,CAAC;AACrC,WAAO,cAAc,cAAc,YAAY,YAAW,CAAE,IAAI;AAAA,EAClE;AACA,WAAS,uBAAuB;AAC9B,kCAA8B;AAAA,MAC5B,YAAY;AAAA,MACZ,UAAU;AAAA,MACV,gBAAgB;AAAA,IACpB,CAAG;AACD,UAAM,kBAAkB;AAAA,MACtB,MAAM;AAAA,MACN,MAAM;AAAA,MACN,MAAM;AAAA,MACN,MAAM;AAAA,MACN,SAAS;AAAA,MACT,OAAO;AAAA,MACP,MAAM;AAAA,MACN,MAAM;AAAA,MACN,MAAM;AAAA,MACN,MAAM;AAAA,MACN,MAAM;AAAA,MACN,MAAM;AAAA,MACN,MAAM;AAAA,MACN,MAAM;AAAA,MACN,MAAM;AAAA,MACN,MAAM;AAAA,MACN,MAAM;AAAA,MACN,MAAM;AAAA,MACN,MAAM;AAAA,MACN,MAAM;AAAA,IACP;AACD,UAAM,SAAS,OAAO,SAAS;AAC/B,UAAM,cAAc,OAAO,MAAM,GAAG;AACpC,UAAM,aAAa,YAAY,YAAY,SAAS,CAAC;AACrD,WAAO,aAAa,gBAAgB,UAAU,IAAI;AAAA,EACpD;AACA,WAAS,yBAAyB;AAChC,kCAA8B;AAAA,MAC5B,YAAY;AAAA,MACZ,UAAU;AAAA,MACV,gBAAgB;AAAA,IACpB,CAAG;AACD,UAAM,OAAO,OAAO,SAAS;AAC7B,UAAM,YAAY,KAAK,MAAM,GAAG;AAChC,UAAM,UAAU,UAAU,CAAC;AAC3B,WAAO,cAAc,WAAW,OAAO,SAAS,QAAQ,aAAa;AAAA,EACvE;AACA,WAAS,cAAc,OAAO;AAC5B,QAAI,SAAS,OAAO,OAAO,YAAY,EAAE,SAAS,KAAK,GAAG;AACxD,aAAO;AAAA,IACX;AACE,WAAO;AAAA,EACT;AAUA,WAAS,WAAW,OAAO;AACzB,QAAI,UAAU,QAAQ;AACpB,aAAO;AAAA,IACX;AACE,QAAI,OAAO,UAAU,UAAU;AAC7B,aAAO;AAAA,IACX;AACE,QAAI,OAAO,UAAU,UAAU;AAC7B,YAAM,SAAS,OAAO,KAAK;AAC3B,UAAI,CAAC,OAAO,MAAM,MAAM,GAAG;AACzB,eAAO;AAAA,MACb;AAAA,IACA;AACE,WAAO;AAAA,EACT;AAgOA,WAAS,qBAAqB,mBAAmB,QAAQ;AACvD,WAAO,QAAQ,MAAM,MAAM,aAAa;AACtC,YAAM,oBAAoB,KAAK,iBAAkB;AACjD,UAAI;AACF,YAAI,CAAC,mBAAmB;AACtB,4BAAkB,OAAO,yBAAyB;AAClD,sBAAY,oCAAoC,cAAc;AAC9D,iBAAO,EAAE,mBAAmB,mBAAmB;AAC/C;AAAA,QACR;AACM,0BAAkB,OAAO,yBAAyB;AAClD,cAAM,KAAK,cAAc,mBAAmB,iBAAiB;AAC7D,aAAK,qBAAqB,mBAAmB,iBAAiB;AAC9D,cAAM,KAAK;AAAA,UACT;AAAA,UACA;AAAA,QACD;AACD,cAAM,KAAK,yBAAyB,mBAAmB,iBAAiB;AACxE,0BAAkB,MAAM,wBAAwB,KAAK,mBAAoB;AACzE,0BAAkB,OAAO,wBAAwB;AAAA,MAClD,SAAQ,OAAO;AACd,oBAAY,sCAAsC,gBAAgB,KAAK;AAAA,MAC7E;AACI,aAAO,EAAE,mBAAmB,mBAAmB;AAAA,IACnD,CAAG;AAAA,EACH;AACA,WAAS,cAAc,mBAAmB,mBAAmB;AAC3D,WAAO,QAAQ,MAAM,MAAM,aAAa;AACtC,YAAM,KAAK,kBAAkB,iBAAiB;AAC9C,WAAK,aAAa,iBAAiB;AACnC,WAAK,kBAAkB,mBAAmB,iBAAiB;AAC3D,WAAK,iBAAiB,iBAAiB;AAAA,IAC3C,CAAG;AAAA,EACH;AACA,WAAS,kBAAkB,mBAAmB,mBAAmB;AAC/D,QAAI,kBAAkB,aAAa,oBAAoB,MAAM;AAC3D,wBAAkB,aAAa,kBAAkB,aAAa;AAAA,IAClE;AACE,QAAI,CAAC,kBAAkB,aAAa,iBAAiB;AACnD,wBAAkB,OAAO,8BAA8B;AACvD,wBAAkB,aAAa,kBAAkB,kBAAkB,aAAa,mBAAmB,KAAK,kBAAmB;AAAA,IAC/H,OAAS;AACL,wBAAkB,OAAO,8BAA8B;AAAA,IAC3D;AAAA,EACA;AACA,WAAS,yBAAyB,mBAAmB,mBAAmB;AACtE,WAAO,QAAQ,MAAM,MAAM,aAAa;AACtC,UAAI;AACJ,YAAM,aAAa;AAAA,QACjB,kBAAkB;AAAA,QAClB,kBAAkB,aAAa;AAAA,MAChC;AACD,UAAI,CAAC,YAAY;AACf;AAAA,MACN;AACI,YAAM,cAAc,KAAK,kBAAkB,UAAU,oBAAoB,OAAO,SAAS,GAAG,CAAC;AAC7F,YAAM,KAAK;AAAA,QACT;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACD;AAAA,IACL,CAAG;AAAA,EACH;AACA,WAAS,aAAa,mBAAmB;AACvC,QAAI,kBAAkB,aAAa,0BAA0B;AAC3D,YAAM,CAAC,QAAQ,YAAY,IAAI,KAAK;AAAA,QAClC,kBAAkB,aAAa;AAAA,MAChC;AACD,wBAAkB,aAAa,iBAAiB;AAChD,wBAAkB,aAAa,uBAAuB;AAAA,IAC1D;AAAA,EACA;AACA,WAAS,iBAAiB,mBAAmB;AAC3C,UAAM,iBAAiB,kBAAkB,UAAU;AACnD,QAAI,CAAC,gBAAgB;AACnB;AAAA,IACJ;AACE,QAAI,eAAe,eAAe;AAChC,qBAAe,gBAAgB,WAAW,eAAe,aAAa;AAAA,IAC1E,OAAS;AACL,qBAAe,gBAAgB,kBAAkB,cAAc;AAAA,IACnE;AAAA,EACA;AACA,WAAS,kBAAkB,gBAAgB;AACzC,UAAM,kBAAkB,WAAW,eAAe,eAAe;AACjE,QAAI,OAAO,oBAAoB,aAAa;AAC1C,aAAO;AAAA,IACX,OAAS;AACL,YAAM,gBAAgB,WAAW,eAAe,aAAa;AAC7D,UAAI,OAAO,kBAAkB,aAAa;AACxC;AAAA,UACE;AAAA,UACA;AAAA,QACD;AAAA,MACP;AACI,YAAM,WAAW,kBAAkB,gBAAgB,eAAe;AAClE,aAAO,KAAK,IAAI,GAAG,kBAAkB,YAAY,iBAAiB,EAAE;AAAA,IACxE;AAAA,EACA;AACA,WAAS,kBAAkB,gBAAgB,iBAAiB;AAC1D,UAAM,WAAW,WAAW,eAAe,QAAQ;AACnD,QAAI,OAAO,aAAa,aAAa;AACnC,YAAM,aAAa,WAAW,eAAe,UAAU;AACvD,UAAI,OAAO,eAAe,aAAa;AACrC;AAAA,UACE;AAAA,UACA;AAAA,QACD;AAAA,MACP,OAAW;AACL,eAAO,mBAAmB,IAAI,aAAa,QAAQ,aAAa;AAAA,MACtE;AAAA,IACA,OAAS;AACL,aAAO;AAAA,IACX;AACE,WAAO;AAAA,EACT;AACA,WAAS,2BAA2B,QAAQ;AAC1C,QAAI,CAAC,QAAQ;AACX,aAAO,CAAC,IAAI,EAAE;AAAA,IAClB;AACE,UAAM,gBAAgB,OAAO,KAAM;AACnC,UAAM,wBAAwB,cAAc;AAAA,MAC1C;AAAA,IACD;AACD,QAAI,yBAAyB,sBAAsB,CAAC,KAAK,sBAAsB,CAAC,KAAK,sBAAsB,CAAC,GAAG;AAC7G,YAAM,gBAAgB,sBAAsB,CAAC,EAAE,KAAM;AACrD,YAAM,eAAe,sBAAsB,CAAC,EAAE,KAAM;AACpD,YAAM,aAAa,sBAAsB,CAAC,EAAE,KAAM;AAClD,aAAO,CAAC,GAAG,aAAa,KAAK,UAAU,IAAI,YAAY;AAAA,IAC3D;AACE,UAAM,kBAAkB,cAAc,MAAM,yBAAyB;AACrE,QAAI,mBAAmB,gBAAgB,CAAC,KAAK,gBAAgB,CAAC,GAAG;AAC/D,YAAM,eAAe,gBAAgB,CAAC,EAAE,KAAM;AAC9C,YAAM,aAAa,gBAAgB,CAAC,EAAE,KAAM;AAC5C,UAAI,WAAW,MAAM,KAAK,EAAE,UAAU,GAAG;AACvC,cAAM,qBAAqB,aAAa,MAAM,WAAW;AACzD,YAAI,oBAAoB;AACtB,iBAAO,CAAC,eAAe,EAAE;AAAA,QACjC;AAAA,MACA;AACI,aAAO,CAAC,YAAY,YAAY;AAAA,IACpC;AACE,UAAM,gBAAgB,cAAc;AAAA,MAClC;AAAA,IACD;AACD,QAAI,iBAAiB,cAAc,CAAC,KAAK,cAAc,CAAC,GAAG;AACzD,YAAM,aAAa,cAAc,CAAC,EAAE,KAAM;AAC1C,YAAM,eAAe,cAAc,CAAC,EAAE,KAAM;AAC5C,aAAO,CAAC,YAAY,YAAY;AAAA,IACpC;AACE,WAAO,CAAC,eAAe,EAAE;AAAA,EAC3B;AACA,WAAS,kBAAkB,mBAAmB;AAC5C,WAAO,QAAQ,MAAM,MAAM,aAAa;AACtC,YAAM,cAAc,IAAI;AAAA,QACtB,kBAAkB,UAAU;AAAA,MAC7B;AACD,YAAM,mBAAmB,MAAM,KAAK,UAAU,eAAe;AAC7D,UAAI,kBAAkB;AACpB,aAAK,YAAY,eAAe;AAChC,0BAAkB,UAAU,kBAAkB,CAAC,gBAAgB;AAC/D;AAAA,MACN;AACI,UAAI,kBAAkB,UAAU,gBAAgB;AAC9C,oBAAY,IAAI,kBAAkB,UAAU,cAAc;AAAA,MAChE;AACI,wBAAkB,UAAU,kBAAkB,MAAM,KAAK,WAAW;AAAA,IACxE,CAAG;AAAA,EACH;AACA,WAAS,mBAAmB;AAC1B,UAAM,oBAAoB;AAAA,MACxB;AAAA,MACA,QAAQ;AAAA,QACN,wBAAwB;AAAA,QACxB,0BAA0B;AAAA,QAC1B,6BAA6B;AAAA,QAC7B,4BAA4B;AAAA,QAC5B,gBAAgB;AAAA,QAChB,mCAAmC;AAAA,QACnC,8BAA8B;AAAA,QAC9B,uBAAuB;AAAA,QACvB,sCAAsC;AAAA,QACtC,oCAAoC;AAAA,QACpC,6BAA6B;AAAA,MAC9B;AAAA,MACD,MAAM;AAAA,QACJ,YAAY;AAAA,QACZ,eAAe;AAAA,QACf,SAAS;AAAA,QACT,eAAe;AAAA,QACf,aAAa;AAAA,QACb,MAAM;AAAA,QACN,eAAe;AAAA,MAChB;AAAA,MACD,OAAO;AAAA,QACL,wBAAwB,KAAK,mBAAkB;AAAA,MACrD;AAAA,IACG;AACD,WAAO;AAAA,EACT;AACA,WAAS,iCAAiC,mBAAmB,mBAAmB;AAC9E,WAAO,QAAQ,MAAM,MAAM,aAAa;AACtC,YAAM,EAAE,qBAAqB,kBAAkB;AAC/C,UAAI,kBAAkB;AACpB,cAAM,cAAc,MAAM,KAAK,UAAU,aAAa;AACtD,YAAI,aAAa;AACf,eAAK,YAAY,aAAa;AAC9B,gBAAM,WAAW,8DAA8D,mBAAmB,WAAW,CAAC;AAC9G,gBAAM,MAAM,QAAQ;AACpB,4BAAkB,OAAO,6BAA6B;AAAA,QAC9D;AAAA,MACA;AACI,aAAO;AAAA,IACX,CAAG;AAAA,EACH;AACA,WAAS,wBAAwB,mBAAmB;AAClD,QAAI,IAAI,IAAI,IAAI,IAAI,IAAI;AACxB,UAAM,MAAM,KAAK,kBAAkB,aAAa,OAAO,SAAS,GAAG,mBAAmB,OAAO,SAAS,GAAG,iBAAiB,aAAa,QAAQ;AAC7I,cAAQ,MAAM,KAAK,kBAAkB,aAAa,OAAO,SAAS,GAAG,mBAAmB,OAAO,SAAS,GAAG;AAAA,IAC/G;AACE,UAAM,MAAM,KAAK,kBAAkB,aAAa,OAAO,SAAS,GAAG,mBAAmB,OAAO,SAAS,GAAG,iBAAiB,aAAa,SAAS;AAC9I,aAAO,KAAK,sCAAsC,iBAAiB;AAAA,IACvE;AACE,WAAO;AAAA,EACT;AACA,WAAS,sCAAsC,mBAAmB;AAChE,QAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI;AACpC,UAAM,UAAU,kBAAkB,aAAa;AAC/C,QAAI,CAAC,kBAAkB,aAAa,iBAAiB;AACnD,aAAO;AAAA,IACX;AACE,UAAM,mBAAmB,MAAM,MAAM,MAAM,KAAK,kBAAkB,aAAa,OAAO,SAAS,GAAG,mBAAmB,OAAO,SAAS,GAAG,cAAc,OAAO,SAAS,GAAG,QAAQ,OAAO,SAAS,GAAG,OAAO;AAC3M,UAAM,oBAAoB,mBAAmB,OAAO,SAAS,gBAAgB;AAC7E,QAAI,CAAC,mBAAmB;AACtB,aAAO;AAAA,IACX;AACE,UAAM,qBAAqB,OAAO,KAAK,uBAAuB,OAAO,CAAC;AACtE,SAAK,sBAAsB,OAAO,SAAS,mBAAmB,YAAY,GAAG;AAC3E,YAAM,WAAW,mBAAmB,CAAC;AACrC,YAAM,mBAAmB,kBAAkB,QAAQ;AACnD,aAAO,cAAc,eAAe;AAAA,QAClC,YAAY,oBAAoB,OAAO,SAAS,iBAAiB,cAAc;AAAA,QAC/E,sBAAsB,oBAAoB,OAAO,SAAS,iBAAiB,wBAAwB;AAAA,QACnG,sBAAsB,oBAAoB,OAAO,SAAS,iBAAiB,wBAAwB;AAAA,MACpG,GAAE,gBAAgB,GAAG;AAAA,QACpB,gCAAgC,MAAM,MAAM,KAAK,kBAAkB,aAAa,OAAO,SAAS,GAAG,mBAAmB,OAAO,SAAS,GAAG,cAAc,OAAO,SAAS,GAAG,kCAAkC,oBAAoB,OAAO,SAAS,iBAAiB;AAAA,MACvQ,CAAK;AAAA,IACL;AACE,SAAK,sBAAsB,OAAO,SAAS,mBAAmB,UAAU,GAAG;AACzE,YAAM,cAAc,kBAAkB,aAAa,oBAAoB,KAAK,mBAAoB;AAChG,YAAM,mBAAmB,eAAe,kBAAkB,WAAW;AACrE,UAAI,CAAC,kBAAkB;AACrB,eAAO;AAAA,MACb;AACI,aAAO,cAAc,eAAe,CAAE,GAAE,gBAAgB,GAAG;AAAA,QACzD,gCAAgC,MAAM,KAAK,kBAAkB,SAAS,mBAAmB,OAAO,SAAS,GAAG,cAAc,OAAO,SAAS,GAAG,kCAAkC,oBAAoB,OAAO,SAAS,iBAAiB;AAAA,MAC1O,CAAK;AAAA,IACL;AACE,WAAO;AAAA,EACT;AACA,WAAS,kBAAkB,WAAW,qBAAqB;AACzD,WAAO,QAAQ,MAAM,MAAM,aAAa;AACtC,UAAI;AACJ,YAAM,eAAe,KAAK,UAAU,oBAAoB,OAAO,SAAS,GAAG,MAAM,CAAC;AAClF,UAAI,aAAa;AACf,cAAM,QAAQ;AAAA,UACZ,YAAY,IAAI,CAAC,WAAW,QAAQ,MAAM,MAAM,aAAa;AAC3D,gBAAI,KAAK;AACT,kBAAM,eAAe;AAAA,cACnB;AAAA,cACA,YAAY;AAAA,cACZ,cAAc,MAAM,UAAU,eAAe,OAAO,SAAS,IAAI,iBAAiB,QAAQ,KAAK,UAAU,eAAe,OAAO,SAAS,GAAG,aAAa,IAAI;AAAA,cAC5J,eAAe,UAAU;AAAA,cACzB,SAAS,UAAU;AAAA,cACnB,WAAW,UAAU;AAAA,YACjC,CAAW;AAAA,UACX,CAAS,CAAC;AAAA,QACH;AAAA,MACP;AAAA,IACA,CAAG;AAAA,EACH;AACA,WAAS,eAAe,gBAAgB;AACtC,WAAO,QAAQ,MAAM,MAAM,aAAa;AACtC,YAAM,WAAW,gEAAgE;AAAA,QAC/E,KAAK,KAAK,UAAU,cAAc,CAAC;AAAA,MACzC,CAAK;AACD,YAAM,MAAM,UAAU;AAAA,QACpB,QAAQ;AAAA,QACR,MAAM,KAAK,UAAU,cAAc;AAAA,MACzC,CAAK;AAAA,IACL,CAAG;AAAA,EACH;AACA,QAAM,yBAAyB;AAC/B,WAAS,UAAU;AACjB,QAAI,IAAI,IAAI,IAAI,IAAI,IAAI;AACxB,KAAC,MAAM,KAAK,OAAO,mBAAmB,OAAO,SAAS,GAAG,cAAc,OAAO,SAAS,GAAG,QAAQ,CAAC,aAAa;AAC9G,UAAI,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,IAAI;AACtC,UAAI,SAAS,sBAAsB;AACjC,SAAC,OAAO,MAAM,OAAO,mBAAmB,OAAO,SAAS,IAAI,uBAAuB,OAAO,SAAS,IAAI,cAAc,UAAU,KAAK;AACpI,SAAC,OAAO,MAAM,OAAO,mBAAmB,OAAO,SAAS,IAAI,iBAAiB,OAAO,SAAS,IAAI,gBAAiB;AAAA,MACxH;AACI,UAAI,SAAS,gBAAgB;AAC3B,SAAC,OAAO,MAAM,OAAO,mBAAmB,OAAO,SAAS,IAAI,iBAAiB,OAAO,SAAS,IAAI,cAAc,QAAQ;AACvH,SAAC,MAAM,KAAK,OAAO,mBAAmB,OAAO,SAAS,GAAG,iBAAiB,OAAO,SAAS,GAAG,gBAAiB;AAAA,MACpH;AAAA,IACA,CAAG;AACD,SAAK,KAAK,OAAO,mBAAmB,OAAO,SAAS,GAAG,iBAAiB;AACtE,aAAO;AAAA,QACL;AAAA,SACC,KAAK,OAAO,mBAAmB,OAAO,SAAS,GAAG;AAAA,QACnD;AAAA,MACD;AACD,aAAO,eAAe,sBAAsB;AAAA,IAChD;AACE,QAAI,OAAO,mBAAmB;AAC5B,aAAO,OAAO;AAAA,IAClB;AACE,QAAI,OAAO,mBAAmB;AAC5B,aAAO,OAAO;AAAA,IAClB;AACE,QAAI,OAAO,aAAa;AACtB,aAAO,OAAO;AAAA,IAClB;AACE,QAAI,OAAO,YAAY;AACrB,aAAO,OAAO;AAAA,IAClB;AACE,QAAI,OAAO,gBAAgB;AACzB,aAAO,OAAO;AAAA,IAClB;AACE,KAAC,KAAK,SAAS,eAAe,iBAAiB,MAAM,OAAO,SAAS,GAAG,OAAQ;AAChF,KAAC,KAAK,SAAS,eAAe,sBAAsB,MAAM,OAAO,SAAS,GAAG,OAAQ;AAAA,EACvF;AAAA,EACA,MAAM,qBAAqB;AAAA,IACzB,cAAc;AAKZ,oBAAc,MAAM,QAAQ,oBAAoB;AAChD,oBAAc,MAAM,iBAAiB,aAAa;AAClD,oBAAc,MAAM,qBAAqB,iBAAiB;AAC1D,oBAAc,MAAM,4BAA4B,wBAAwB;AACxE,oBAAc,MAAM,gBAAgB,YAAY;AAChD,oBAAc,MAAM,8BAA8B,0BAA0B;AAC5E,oBAAc,MAAM,qBAAqB,iBAAiB;AAC1D,oBAAc,MAAM,oBAAoB,gBAAgB;AACxD,oBAAc,MAAM,oBAAoB,gBAAgB;AACxD,oBAAc,MAAM,oCAAoC,gCAAgC;AACxF,oBAAc,MAAM,2BAA2B,uBAAuB;AACtE,oBAAc,MAAM,yCAAyC,qCAAqC;AAClG,oBAAc,MAAM,sBAAsB,kBAAkB;AAC5D,oBAAc,MAAM,qBAAqB,iBAAiB;AAAA,IAC9D;AAAA;AAAA,IAEE,+BAA+B,YAAY,YAAY,mBAAmB,mBAAmB;AAC3F,UAAI;AACJ,oCAA8B;AAAA,QAC5B,YAAY;AAAA,QACZ,UAAU;AAAA,QACV,kBAAkB;AAAA,MACxB,CAAK;AACD,YAAM,SAAS,SAAS,cAAc,QAAQ;AAC9C,aAAO,OAAO;AACd,aAAO,QAAQ;AACf,aAAO,MAAM,0BAA0B,UAAU,4BAA4B,KAAK,kBAAkB,UAAU,eAAe,OAAO,SAAS,GAAG,aAAa,gBAAgB,kBAAkB,UAAU,OAAO,gBAAgB,UAAU,UAAU,kBAAkB,aAAa,aAAa;AAChS,eAAS,KAAK,YAAY,MAAM;AAChC,wBAAkB,OAAO,iBAAiB;AAAA,IAC9C;AAAA,IACE,qBAAqB,mBAAmB,mBAAmB;AACzD,UAAI,IAAI;AACR,oCAA8B;AAAA,QAC5B,YAAY;AAAA,QACZ,UAAU;AAAA,QACV,kBAAkB;AAAA,QAClB,gBAAgB;AAAA,MACtB,CAAK;AACD,YAAM,uBAAuB,KAAK,wBAAwB,iBAAiB;AAC3E,WAAK,wBAAwB,OAAO,SAAS,qBAAqB,yBAAyB,wBAAwB,OAAO,SAAS,qBAAqB,yBAAyB,wBAAwB,OAAO,SAAS,qBAAqB,YAAY;AACxP,cAAM,oBAAoB,KAAK;AAAA,UAC7B;AAAA,UACA;AAAA,UACA;AAAA,QACD;AACD,eAAO,aAAa,OAAO,cAAc,CAAE;AAC3C,eAAO,WAAW,KAAK;AAAA,UACrB,qBAAqB,qBAAqB;AAAA,UAC1C,qBAAqB,qBAAqB;AAAA,UAC1C,WAAW,kBAAkB,UAAU;AAAA,UACvC,SAAS,kBAAkB,UAAU;AAAA,UACrC,aAAa,KAAK,kBAAkB,UAAU,eAAe,OAAO,SAAS,GAAG;AAAA,UAChF,eAAe,kBAAkB,UAAU;AAAA;AAAA;AAAA,UAG3C,iBAAiB,KAAK,kBAAkB,UAAU,oBAAoB,OAAO,SAAS,GAAG,CAAC;AAAA,UAC1F;AAAA,UACA,iBAAiB,kBAAkB;AAAA,QAC3C,CAAO;AACD,eAAO,cAAc;AAAA,UACnB,mBAAmB,kBAAkB,aAAa;AAAA,UAClD,kBAAkB,kBAAkB,aAAa;AAAA,UACjD,eAAe,kBAAkB,aAAa;AAAA,UAC9C,gBAAgB,kBAAkB,aAAa;AAAA,UAC/C,sBAAsB,kBAAkB,aAAa;AAAA,UACrD,iBAAiB,kBAAkB,aAAa;AAAA,UAChD,cAAc,kBAAkB,aAAa;AAAA,UAC7C,iBAAiB,kBAAkB,aAAa;AAAA,UAChD,eAAe,kBAAkB,aAAa;AAAA,UAC9C,qBAAqB,kBAAkB,aAAa;AAAA,UACpD,qBAAqB,kBAAkB,aAAa;AAAA,UACpD,mBAAmB,kBAAkB,aAAa;AAAA,UAClD,oBAAoB,kBAAkB,aAAa;AAAA,UACnD,0BAA0B,kBAAkB,aAAa;AAAA,UACzD,kBAAkB,kBAAkB,aAAa;AAAA,QAClD;AACD,cAAM,SAAS,SAAS,cAAc,QAAQ;AAC9C,eAAO,OAAO;AACd,eAAO,QAAQ;AACf,eAAO,KAAK;AACZ,eAAO,MAAM;AACb,iBAAS,KAAK,YAAY,MAAM;AAChC,aAAK;AAAA,UACH,kBAAkB;AAAA,UAClB,qBAAqB;AAAA,QACtB;AACD,0BAAkB,OAAO,+BAA+B;AACxD,0BAAkB,MAAM,6BAA6B,KAAK,mBAAoB;AAAA,MACpF;AAAA,IACA;AAAA,IACE,yCAAyC,sBAAsB,mBAAmB,mBAAmB;AACnG,oCAA8B;AAAA,QAC5B,YAAY;AAAA,QACZ,UAAU;AAAA,QACV,kBAAkB;AAAA,QAClB,gBAAgB;AAAA,MACtB,CAAK;AACD,YAAM,0BAA0B,KAAK;AAAA,QACnC;AAAA,QACA;AAAA,MACD;AACD,YAAM,cAAc,SAAS;AAAA,QAC3B,wBAAwB;AAAA,MACzB;AACD,UAAI,aAAa;AACf,YAAI,wBAAwB,UAAU,QAAQ;AAC5C,iBAAO,YAAY;AAAA,QAC3B;AACM,cAAM,cAAc,SAAS,cAAc,KAAK;AAChD,oBAAY,KAAK;AACjB,oBAAY;AAAA,UACV,wBAAwB;AAAA,UACxB;AAAA,QACD;AACD,0BAAkB,OAAO,qCAAqC;AAC9D,eAAO,YAAY;AAAA,MACzB,OAAW;AACL,0BAAkB,OAAO,qCAAqC;AAC9D;AAAA,UACE,4CAA4C,wBAAwB,QAAQ;AAAA,UAC5E;AAAA,QACD;AACD,eAAO;AAAA,MACb;AAAA,IACA;AAAA,IACE,uBAAuB,sBAAsB,mBAAmB;AAC9D,UAAI,qBAAqB,8BAA8B;AACrD,eAAO,qBAAqB;AAAA,MAClC;AACI,UAAI,kBAAkB,8BAA8B;AAClD,eAAO,kBAAkB;AAAA,MAC/B;AACI;AAAA,QACE;AAAA,QACA;AAAA,MACD;AACD,aAAO;AAAA,IACX;AAAA;AAAA,IAEE,UAAU,MAAM;AACd,UAAI;AACJ,oCAA8B;AAAA,QAC5B,YAAY;AAAA,QACZ,UAAU;AAAA,QACV,kBAAkB;AAAA,MACxB,CAAK;AACD,YAAM,QAAQ,KAAK,SAAS,MAAM;AAClC,YAAM,QAAQ,MAAM,MAAM,KAAK,IAAI,GAAG;AACtC,UAAI,MAAM,WAAW,GAAG;AACtB,gBAAQ,KAAK,MAAM,UAAU,OAAO,SAAS,GAAG,MAAM,GAAG,EAAE,MAAO;AAAA,MACxE;AACI,aAAO;AAAA,IACX;AAAA,IACE,YAAY,MAAM;AAChB,oCAA8B;AAAA,QAC5B,YAAY;AAAA,QACZ,UAAU;AAAA,QACV,kBAAkB;AAAA,QAClB,gBAAgB;AAAA,MACtB,CAAK;AACD,YAAM,OAAO;AACb,YAAM,SAAS,OAAO,SAAS;AAC/B,YAAM,eAAe,GAAG,IAAI,yEAAyE,MAAM,SAAS,IAAI;AACxH,eAAS,SAAS;AAAA,IACtB;AAAA,IACE,qBAAqB;AACnB,UAAI;AACJ,oCAA8B;AAAA,QAC5B,YAAY;AAAA,QACZ,UAAU;AAAA,QACV,kBAAkB;AAAA,MACxB,CAAK;AACD,YAAM,WAAW,SAAS,gBAAgB,KAAK,MAAM,GAAG,EAAE,CAAC;AAC3D,UAAI,UAAU;AACZ,eAAO,SAAS,YAAa;AAAA,MACnC;AACI,cAAQ,KAAK,UAAU,SAAS,MAAM,GAAG,EAAE,CAAC,MAAM,OAAO,SAAS,GAAG,YAAa;AAAA,IACtF;AAAA,IACE,UAAU;AACR,cAAS;AAAA,IACb;AAAA,EACA;AACA,WAAS,2BAA2B;AAClC,UAAM,SAAS,CAAC,EAAE,wBAAwB;AACxC,aAAO,oBAAoB;AAAA,IAC5B;AACD,SAAK,IAAI,qBAAoB,EAAG,KAAK,OAAO,mBAAmB,MAAM;AAAA,EACvE;AC/iCA,2BAAyB;;","x_google_ignoreList":[0]}